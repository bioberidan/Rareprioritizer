# IQR Outlier Analysis Summary - Hyperparameter Sensitivity Study

**Analysis Date**: 2025-07-10 02:14:45  
**Dataset**: 4924 diseases with prevalence estimates  
**Data Source**: `data/03_processed/orpha/orphadata/orpha_prevalence/`

## üìä **Executive Summary**

### Key Findings
- **Total Diseases Analyzed**: 4924 with valid prevalence estimates
- **Prevalence Range**: 0.5 to 500.0 per million
- **Distribution**: Highly right-skewed (median: 0.5, mean: 29.2)
- **IQR Methods Tested**: 25 different IQR variations

### Method Range
- **Most Conservative**: P5-P95 (0 outliers, 0.0%)
- **Most Aggressive**: IQR_median_based (1490 outliers, 30.3%)
- **Outlier Range**: 0 to 1490 diseases (0.0% to 30.3%)

## üî¨ **IQR Method Categories**

### Classic IQR Multipliers
| Multiplier | Outliers | Percentage | Upper Threshold |
|------------|----------|------------|----------------|
| 1.5x | 1047 | 21.3% | 11.75 |
| 2.0x | 1032 | 21.0% | 14.0 |
| 2.5x | 1020 | 20.7% | 16.25 |

### Percentile-Based Methods
| Percentile Range | Outliers | Percentage | Method |
|------------------|----------|------------|--------|
| 10-90 | 341 | 6.9% | P10-P90 |
| 20-80 | 420 | 8.5% | P20-P80 |
| 5-95 | 0 | 0.0% | P5-P95 |

### Robust Methods
| Method | Outliers | Percentage | Description |
|--------|----------|------------|-------------|
| trimmed | 1047 | 21.3% | Trimmed 5% extremes |
| winsorized | 0 | 0.0% | Winsorized extremes |
| median_based | 1490 | 30.3% | Median + MAD based |

### Adaptive Methods
| Method | Outliers | Percentage | Adaptation |
|--------|----------|------------|------------|
| Skewness Adaptive | 1020 | 20.7% | Skew: 3.85, Mult: 2.5 |
| Sample Size Adaptive | 1032 | 21.0% | N: 4924, Mult: 2.0 |

## üìà **Parameter Sensitivity Analysis**

### Multiplier Sensitivity
- **Range Tested**: 1.0x to 4.0x in 0.1 increments
- **Most Sensitive Range**: 1.0-2.0x (large changes in outlier count)
- **Stability Range**: 2.5-4.0x (smaller changes in outlier count)

### Percentile Range Sensitivity
- **Range Tested**: 5th-95th to 30th-70th percentiles
- **Optimal Range**: Based on balance between sensitivity and specificity

## üè• **Medical Relevance Assessment**

### Quality Metrics by Method
| Method | High Reliability Outliers | Evidence Ratio | Global Coverage |
|--------|---------------------------|----------------|-----------------|
| IQR_1.5x | 879 | 0.76 | 0.48 |
| IQR_2.0x | 865 | 0.76 | 0.48 |
| P10-P90 | 291 | 0.74 | 0.45 |
| IQR_skewness_adaptive | 854 | 0.76 | 0.48 |

## üéØ **Recommendations**

### Optimal IQR Parameters for Prevalence Data

#### Conservative Approach (High Precision)
- **Method**: IQR 2.0x multiplier
- **Rationale**: Balanced outlier detection with low false positive rate
- **Use Case**: High-stakes analysis where false positives are costly

#### Balanced Approach (Recommended)
- **Method**: Skewness-adaptive IQR
- **Rationale**: Adjusts to data characteristics automatically
- **Use Case**: General prevalence data analysis

#### Sensitive Approach (High Recall)
- **Method**: P10-P90 percentile range
- **Rationale**: Captures more potential outliers for investigation
- **Use Case**: Data quality screening and exploratory analysis

### Implementation Guidelines

1. **For Skewed Data** (skewness > 2): Use multiplier ‚â• 2.0
2. **For Normal-like Data** (skewness < 1): Standard 1.5x multiplier acceptable
3. **For Small Samples** (n < 100): Use conservative multipliers (1.0-1.5x)
4. **For Large Samples** (n > 1000): Can use more liberal multipliers (2.0-2.5x)

### Quality Thresholds
- **High-Quality Outliers**: Reliability score ‚â• 8.0
- **Evidence-Based Outliers**: Multiple records (>1)
- **Global Outliers**: Worldwide geographic coverage

## üìÅ **Generated Files**

- `iqr_sensitivity_grid.png` - 3x3 grid of IQR method variations
- `iqr_parameter_sensitivity.png` - Parameter sensitivity analysis plots
- `iqr_detailed_results.json` - Complete numerical results
- `iqr_medical_assessment.json` - Medical relevance evaluation
- `iqr_analysis_summary.md` - This comprehensive summary

## üîó **Conclusions**

The IQR hyperparameter sensitivity analysis reveals that:

1. **Standard IQR (1.5x)** is too aggressive for highly skewed prevalence data
2. **Moderate multipliers (2.0-2.5x)** provide better balance for biological data
3. **Adaptive methods** show promise for automatic parameter selection
4. **Percentile-based methods** offer robust alternatives for non-normal distributions

**Recommended Default**: Skewness-adaptive IQR with fallback to 2.0x multiplier for prevalence data analysis.

---

*Generated by RarePrioritizer IQR Outlier Analysis System*  
*For questions or issues, refer to the project documentation*
